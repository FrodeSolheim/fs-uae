#!/bin/sh
# This file is automatically generated by fs-package
set -e

build/env/packages/harfbuzz
build/env/packages/libpng
build/env/packages/zlib

PACKAGE=freetype-2.13.3
CHECKSUM=0550350666d427c74daeb85d5ac7bb353acba5f76956395995311a9c6f063289
REVISION=0

. build/env/scripts/package.sh

build/env/scripts/download.py \
https://download.savannah.gnu.org/releases/freetype/freetype-2.13.3.tar.xz \
sha256:$CHECKSUM

rm -Rf build/env/_temp && mkdir build/env/_temp && cd build/env/_temp
tar xf ../_sources/freetype-2.13.3.tar.xz
cd freetype-2.13.3

./configure --prefix=$PREFIX \
--without-brotli \
--without-bzip2 \
--without-harfbuzz \
--with-png \
--with-zlib
if [ "$SYSTEM_OS" = "Windows" ]; then
make PLATFORM=windows
else
make
fi
make install

# if [ "$SYSTEM_OS" = "macOS" ]; then
# DYLIB=libfreetype.6.dylib
# install_name_tool -id @rpath/$DYLIB $FSENV_PREFIX/lib/$DYLIB
# fi

touch $INSTALLED
