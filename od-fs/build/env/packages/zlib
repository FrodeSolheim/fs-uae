#!/bin/sh
# --------------------------------------------------------------------------------------------------
set -e
# --------------------------------------------------------------------------------------------------

PACKAGE=zlib-1.3.1
PACKAGE_REVISION=0
CHECKSUM=9a93b2b7dfdac77ceba5a558a580e74667dd6fede4585b91eefb60f03b72df23

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_PRE"
# --------------------------------------------------------------------------------------------------

"$BUILD_ENV_DIR/scripts/download.py" \
https://zlib.net/fossils/$PACKAGE.tar.gz \
sha256:$CHECKSUM

tar xf "$BUILD_ENV_DIR/_sources/$PACKAGE.tar.gz"
cd $PACKAGE

if [ "`uname -o`" = "Msys" ]; then
make -f win32/Makefile.gcc
make -f win32/Makefile.gcc \
BINARY_PATH=$PREFIX/bin \
INCLUDE_PATH=$PREFIX/include \
LIBRARY_PATH=$PREFIX/lib \
SHARED_MODE=1 \
install
else
./configure --prefix=$PREFIX
make
make install
fi

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_POST"
# --------------------------------------------------------------------------------------------------
