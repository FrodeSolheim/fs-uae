#!/bin/sh
# --------------------------------------------------------------------------------------------------
set -e
# --------------------------------------------------------------------------------------------------

# Dependency: pulseaudio?
# Dependency: wayland?

PACKAGE=SDL3-3.2.20
PACKAGE_REVISION=0
CHECKSUM=467600ae090dd28616fa37369faf4e3143198ff1da37729b552137e47f751a67

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_PRE"
# --------------------------------------------------------------------------------------------------

"$BUILD_ENV_DIR/scripts/download.py" \
https://www.libsdl.org/release/$PACKAGE.tar.gz \
sha256:$CHECKSUM

tar xf "$BUILD_ENV_DIR/_sources/$PACKAGE.tar.gz"
cd $PACKAGE

cmake -S . -B _build
cmake --build _build
cmake --install _build --prefix $PREFIX

if [ "$SYSTEM_OS" = "macOS" ]; then
DYLIB=libSDL3.0.dylib
install_name_tool -id $PREFIX/lib/$DYLIB $PREFIX/lib/$DYLIB
fi

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_POST"
# --------------------------------------------------------------------------------------------------
