#!/bin/sh
# --------------------------------------------------------------------------------------------------
set -e
# --------------------------------------------------------------------------------------------------

PACKAGE=libiconv-1.18
PACKAGE_REVISION=0
CHECKSUM=3b08f5f4f9b4eb82f151a7040bfd6fe6c6fb922efe4b1659c66ea933276965e8

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_PRE"
# --------------------------------------------------------------------------------------------------

"$BUILD_ENV_DIR/scripts/download.py" \
https://ftp.gnu.org/pub/gnu/libiconv/$PACKAGE.tar.gz \
sha256:$CHECKSUM

tar xf "$BUILD_ENV_DIR/_sources/$PACKAGE.tar.gz"
cd $PACKAGE

./configure --prefix=$PREFIX
make
make install

# if [ "$SYSTEM_OS" = "macOS" ]; then
# DYLIB=libiconv.2.dylib
# install_name_tool -id @rpath/$DYLIB $PREFIX/lib/$DYLIB
# fi

# --------------------------------------------------------------------------------------------------
. "$PACKAGE_POST"
# --------------------------------------------------------------------------------------------------
